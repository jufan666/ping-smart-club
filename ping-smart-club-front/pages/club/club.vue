<template>
  <view class="container">
    <!-- ä¿±ä¹éƒ¨æ¨ªå¹… -->
    <view class="banner">
      <image class="banner-image" src="/static/logo.png" mode="aspectFit"></image>
      <view class="banner-text">
        <text class="club-name">ä¸‰ä¼—ä¹’ä¹“çƒä¿±ä¹éƒ¨</text>
        <text class="club-slogan">ä¸“ä¸šåŸ¹è®­ï¼Œæˆå°±æœªæ¥å† å†›</text>
      </view>
    </view>

    <!-- ä¿±ä¹éƒ¨ç®€ä»‹ -->
    <view class="section">
      <view class="section-title">
        <text class="title-text">ä¿±ä¹éƒ¨ç®€ä»‹</text>
      </view>
      <view class="intro-content">
        <text class="intro-text">ä¸‰ä¼—ä¹’ä¹“çƒä¿±ä¹éƒ¨æˆç«‹äº1990å¹´ï¼Œæ˜¯ä¸€å®¶ä¸“æ³¨äºé’å°‘å¹´ä¹’ä¹“çƒåŸ¹è®­çš„ä¸“ä¸šæœºæ„ã€‚æˆ‘ä»¬æ‹¥æœ‰å›½é™…æ ‡å‡†è®­ç»ƒåœºåœ°ã€å…ˆè¿›çš„æ•™å­¦è®¾å¤‡å’Œç»éªŒä¸°å¯Œçš„æ•™ç»ƒå›¢é˜Ÿï¼Œè‡´åŠ›äºä¸ºå­¦å‘˜æä¾›æœ€ä¸“ä¸šçš„ä¹’ä¹“çƒåŸ¹è®­æœåŠ¡ã€‚</text>
      </view>
    </view>

    <!-- å¸ˆèµ„å›¢é˜Ÿ -->
    <view class="section">
      <view class="section-title">
        <text class="title-text">å¸ˆèµ„å›¢é˜Ÿ</text>
      </view>
      <view class="team-grid">
        <view class="coach-card" v-for="(coach, index) in coaches" :key="index">
          <image class="coach-avatar" :src="coach.avatar" mode="aspectFill"></image>
          <view class="coach-info">
            <text class="coach-name">{{ coach.name }}</text>
            <text class="coach-title">{{ coach.title }}</text>
            <text class="coach-desc">{{ coach.description }}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- ä¿±ä¹éƒ¨å†å² -->
    <view class="section">
      <view class="section-title">
        <text class="title-text">ä¿±ä¹éƒ¨å†å²</text>
      </view>
      <view class="timeline">
        <view class="timeline-item" v-for="(event, index) in history" :key="index">
          <view class="timeline-dot"></view>
          <view class="timeline-content">
            <text class="timeline-year">{{ event.year }}</text>
            <text class="timeline-text">{{ event.event }}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- ä¿±ä¹éƒ¨è£èª‰ -->
    <view class="section">
      <view class="section-title">
        <text class="title-text">ä¿±ä¹éƒ¨è£èª‰</text>
      </view>
      <view class="honor-grid">
        <view class="honor-card" v-for="(honor, index) in honors" :key="index">
          <view class="honor-icon">
            <text class="iconfont icon-trophy">{{ honor.icon }}</text>
          </view>
          <text class="honor-title">{{ honor.title }}</text>
          <text class="honor-year">{{ honor.year }}</text>
        </view>
      </view>
    </view>

    <!-- ä¼˜ç§€å­¦å‘˜ -->
    <view class="section">
      <view class="section-title">
        <text class="title-text">ä¼˜ç§€å­¦å‘˜</text>
      </view>
      <view class="students-grid">
        <view class="student-card" v-for="(student, index) in students" :key="index">
          <image class="student-avatar" :src="student.avatar" mode="aspectFill"></image>
          <view class="student-info">
            <text class="student-name">{{ student.name }}</text>
            <text class="student-achievement">{{ student.achievement }}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- è”ç³»æˆ‘ä»¬ -->
    <view class="section contact-section">
      <view class="section-title">
        <text class="title-text">è”ç³»æˆ‘ä»¬</text>
      </view>
      <view class="contact-info">
        <view class="contact-item">
          <text class="contact-label">åœ°å€ï¼š</text>
          <text class="contact-value">åŒ—äº¬å¸‚æœé˜³åŒºä½“è‚²ä¸­å¿ƒè·¯88å·</text>
        </view>
        <view class="contact-item">
          <text class="contact-label">ç”µè¯ï¼š</text>
          <text class="contact-value">010-12345678</text>
        </view>
        <view class="contact-item">
          <text class="contact-label">é‚®ç®±ï¼š</text>
          <text class="contact-value">info@pingpongclub.com</text>
        </view>
        <view class="contact-item">
          <text class="contact-label">è¥ä¸šæ—¶é—´ï¼š</text>
          <text class="contact-value">å‘¨ä¸€è‡³å‘¨äº” 9:00-21:00ï¼Œå‘¨æœ« 8:00-22:00</text>
        </view>
      </view>
    </view>

    <!-- ä½¿ç”¨è‡ªå®šä¹‰tabbarç»„ä»¶ -->
    <custom-tabbar
      :user-role="userRole"
      :current="0"
      @change="onTabChange"
    />
  </view>
</template>

<script>
import customTabbar from '@/pages/components/custom-tabbar.vue';

export default {
  components: {
    customTabbar
  },
  data() {
    return {
      userRole: '', // å°†åœ¨onLoadä¸­è®¾ç½®
      coaches: [
        {
          name: 'å®‰ä¸°è¾¾',
          title: 'æ€»æ•™ç»ƒ',
          description: 'å‰å›½å®¶é˜Ÿé€‰æ‰‹ï¼Œæ‹¥æœ‰15å¹´æ•™å­¦ç»éªŒ',
          avatar: '/static/images/coach_an.png'
        },
        {
          name: 'é æ¢µ',
          title: 'é«˜çº§æ•™ç»ƒ',
          description: 'çœé˜Ÿé€€å½¹é€‰æ‰‹ï¼Œæ“…é•¿é’å°‘å¹´å¯è’™è®­ç»ƒ',
          avatar: '/static/images/coach_ju.png'
        },
        {
          name: 'è®¸è½©æº',
          title: 'ä¸­çº§æ•™ç»ƒ',
          description: 'ä½“è‚²å¤§å­¦ä¹’ä¹“çƒä¸“ä¸šæ¯•ä¸šï¼Œæ•™å­¦ç»éªŒä¸°å¯Œ',
          avatar: '/static/images/default-avatar.png'
        }
      ],
      history: [
        {
          year: '2010å¹´',
          event: 'æ™ºæ…§ä¹’ä¹“çƒä¿±ä¹éƒ¨æ­£å¼æˆç«‹'
        },
        {
          year: '2012å¹´',
          event: 'é¦–æ¬¡å‚åŠ å¸‚çº§æ¯”èµ›è·å¾—å›¢ä½“å† å†›'
        },
        {
          year: '2015å¹´',
          event: 'æ‰©å»ºè®­ç»ƒåœºåœ°ï¼Œæ–°å¢10å¼ å›½é™…æ ‡å‡†çƒå°'
        },
        {
          year: '2018å¹´',
          event: 'è¢«è¯„ä¸ºå¸‚çº§é’å°‘å¹´ä¹’ä¹“çƒåŸ¹è®­ç¤ºèŒƒåŸºåœ°'
        },
        {
          year: '2021å¹´',
          event: 'å­¦å‘˜é¦–æ¬¡è·å¾—å…¨å›½é’å°‘å¹´ä¹’ä¹“çƒæ¯”èµ›å† å†›'
        }
      ],
      honors: [
        {
          icon: 'ğŸ†',
          title: 'å¸‚çº§é’å°‘å¹´ä¹’ä¹“çƒåŸ¹è®­ç¤ºèŒƒåŸºåœ°',
          year: '2018å¹´'
        },
        {
          icon: 'ğŸ¥‡',
          title: 'çœçº§ä¼˜ç§€ä¹’ä¹“çƒä¿±ä¹éƒ¨',
          year: '2019å¹´'
        },
        {
          icon: 'ğŸ…',
          title: 'å…¨å›½é’å°‘å¹´ä¹’ä¹“çƒæ¯”èµ›ä¼˜ç§€ç»„ç»‡å¥–',
          year: '2020å¹´'
        },
        {
          icon: 'ğŸ–ï¸',
          title: 'ä½“è‚²äº§ä¸šåˆ›æ–°ç¤ºèŒƒå•ä½',
          year: '2022å¹´'
        }
      ],
      students: [
        {
          name: 'å°æ˜',
          achievement: '2022å¹´å…¨å›½é’å°‘å¹´ä¹’ä¹“çƒæ¯”èµ›U12ç»„å† å†›',
          avatar: '/static/images/default-avatar.png'
        },
        {
          name: 'å°çº¢',
          achievement: '2021å¹´çœçº§é’å°‘å¹´ä¹’ä¹“çƒæ¯”èµ›U10ç»„äºšå†›',
          avatar: '/static/images/default-avatar.png'
        },
        {
          name: 'å°å',
          achievement: '2023å¹´å¸‚çº§é’å°‘å¹´ä¹’ä¹“çƒæ¯”èµ›U14ç»„å† å†›',
          avatar: '/static/images/default-avatar.png'
        },
        {
          name: 'å°ä¸½',
          achievement: '2022å¹´çœçº§é’å°‘å¹´ä¹’ä¹“çƒæ¯”èµ›U8ç»„å­£å†›',
          avatar: '/static/images/default-avatar.png'
        }
      ]
    };
  },
  onLoad(options) {
    // æ ¹æ®ä¼ å…¥çš„è§’è‰²å‚æ•°è®¾ç½®ç”¨æˆ·è§’è‰²
    try {
      if (options.role) {
        this.userRole = options.role;
        // ä¿å­˜ç”¨æˆ·è§’è‰²åˆ°æœ¬åœ°å­˜å‚¨
        uni.setStorageSync('userRole', options.role);
      } else {
        // å¦‚æœURLä¸­æ²¡æœ‰è§’è‰²å‚æ•°ï¼Œå°è¯•ä»æœ¬åœ°å­˜å‚¨è·å–
        const savedRole = uni.getStorageSync('userRole');
        if (savedRole) {
          this.userRole = savedRole;
        } else {
          // é»˜è®¤è®¾ç½®ä¸ºå®¶é•¿è§’è‰²
          this.userRole = 'parent';
          uni.setStorageSync('userRole', 'parent');
        }
      }
      
      console.log('å½“å‰ç”¨æˆ·è§’è‰²:', this.userRole);
    } catch (error) {
      console.error('è®¾ç½®ç”¨æˆ·è§’è‰²å¤±è´¥:', error);
      // é»˜è®¤è®¾ç½®ä¸ºå®¶é•¿è§’è‰²
      this.userRole = 'parent';
    }
  },
  methods: {
    onTabChange(index) {
      console.log('å½“å‰é€‰ä¸­çš„tabç´¢å¼•:', index);
    }
  }
};
</script>

<style lang="scss" scoped>
.container {
  padding-bottom: 120rpx; /* ç•™å‡ºåº•éƒ¨tabbarçš„ç©ºé—´ */
}

/* æ¨ªå¹…éƒ¨åˆ† */
.banner {
  position: relative;
  height: 300rpx;
  background-color: #f0f8ff;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.banner-image {
  width: 150rpx;
  height: 150rpx;
  margin-right: 30rpx;
}

.banner-text {
  display: flex;
  flex-direction: column;
}

.club-name {
  font-size: 40rpx;
  font-weight: bold;
  color: #333;
  margin-bottom: 10rpx;
}

.club-slogan {
  font-size: 28rpx;
  color: #666;
}

/* é€šç”¨éƒ¨åˆ†æ ·å¼ */
.section {
  padding: 40rpx 30rpx;
  background-color: #fff;
  margin-bottom: 20rpx;
}

.section-title {
  margin-bottom: 30rpx;
  position: relative;
  padding-left: 20rpx;
}

.title-text {
  font-size: 36rpx;
  font-weight: bold;
  color: #333;
}

.section-title::before {
  content: '';
  position: absolute;
  left: 0;
  top: 10rpx;
  height: 36rpx;
  width: 8rpx;
  background-color: #007AFF;
  border-radius: 4rpx;
}

/* ä¿±ä¹éƒ¨ç®€ä»‹ */
.intro-content {
  line-height: 1.6;
}

.intro-text {
  font-size: 30rpx;
  color: #666;
}

/* å¸ˆèµ„å›¢é˜Ÿ */
.team-grid {
  display: flex;
  flex-direction: column;
  gap: 30rpx;
}

.coach-card {
  display: flex;
  background-color: #f8f8f8;
  border-radius: 16rpx;
  padding: 30rpx;
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);
}

.coach-avatar {
  width: 120rpx;
  height: 120rpx;
  border-radius: 60rpx;
  margin-right: 30rpx;
}

.coach-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.coach-name {
  font-size: 32rpx;
  font-weight: bold;
  color: #333;
  margin-bottom: 10rpx;
}

.coach-title {
  font-size: 28rpx;
  color: #007AFF;
  margin-bottom: 10rpx;
}

.coach-desc {
  font-size: 26rpx;
  color: #666;
}

/* ä¿±ä¹éƒ¨å†å² */
.timeline {
  position: relative;
  padding-left: 30rpx;
}

.timeline::before {
  content: '';
  position: absolute;
  left: 15rpx;
  top: 0;
  height: 100%;
  width: 4rpx;
  background-color: #e0e0e0;
}

.timeline-item {
  position: relative;
  padding-bottom: 40rpx;
}

.timeline-dot {
  position: absolute;
  left: -22rpx;
  top: 10rpx;
  width: 20rpx;
  height: 20rpx;
  border-radius: 10rpx;
  background-color: #007AFF;
  border: 4rpx solid #fff;
  box-shadow: 0 0 0 4rpx #e0e0e0;
}

.timeline-content {
  padding-left: 20rpx;
}

.timeline-year {
  font-size: 30rpx;
  font-weight: bold;
  color: #007AFF;
  margin-bottom: 10rpx;
  display: block;
}

.timeline-text {
  font-size: 28rpx;
  color: #333;
  line-height: 1.5;
}

/* ä¿±ä¹éƒ¨è£èª‰ */
.honor-grid {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
}

.honor-card {
  width: 48%;
  background-color: #f8f8f8;
  border-radius: 16rpx;
  padding: 30rpx;
  margin-bottom: 30rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);
}

.honor-icon {
  font-size: 60rpx;
  margin-bottom: 20rpx;
}

.honor-title {
  font-size: 28rpx;
  font-weight: bold;
  color: #333;
  margin-bottom: 10rpx;
}

.honor-year {
  font-size: 24rpx;
  color: #666;
}

/* ä¼˜ç§€å­¦å‘˜ */
.students-grid {
  display: flex;
  flex-direction: column;
  gap: 30rpx;
}

.student-card {
  display: flex;
  background-color: #f8f8f8;
  border-radius: 16rpx;
  padding: 30rpx;
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);
}

.student-avatar {
  width: 100rpx;
  height: 100rpx;
  border-radius: 50rpx;
  margin-right: 30rpx;
}

.student-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.student-name {
  font-size: 32rpx;
  font-weight: bold;
  color: #333;
  margin-bottom: 10rpx;
}

.student-achievement {
  font-size: 26rpx;
  color: #666;
  line-height: 1.5;
}

/* è”ç³»æˆ‘ä»¬ */
.contact-section {
  margin-bottom: 40rpx;
}

.contact-info {
  line-height: 1.6;
}

.contact-item {
  margin-bottom: 20rpx;
  display: flex;
}

.contact-label {
  font-size: 30rpx;
  color: #333;
  width: 160rpx;
}

.contact-value {
  font-size: 30rpx;
  color: #666;
  flex: 1;
}
</style>
